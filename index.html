<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatDong - Donghua Expert</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="chat-container">
  <div class="chat-header">
    <img src="LogoWEB.png">
  </div>
  <div class="chat-messages" id="chatMessages">
    <div class="message bot">
      Halo! Aku ChatDong, ahli donghua (animasi China)<br><br>
      Aku bisa bantu kamu cari donghua yang cocok berdasarkan genre, tahun, atau mood yang kamu inginkan!
      <div class="suggestions">
        <button class="suggestion-btn" onclick="sendSuggestion('rekomendasi donghua terbaik')">Rekomendasi Terbaik</button>
        <button class="suggestion-btn" onclick="sendSuggestion('donghua action')">Action</button>
        <button class="suggestion-btn" onclick="sendSuggestion('donghua romance')">Romance</button>
        <button class="suggestion-btn" onclick="sendSuggestion('donghua 2025')">Terbaru 2025</button>
      </div>
    </div>
  </div>
  <div class="typing-indicator" id="typingIndicator">
    <div class="typing-dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <div class="chat-input">
    <input type="text" id="userInput" placeholder="Tanya tentang donghua...">
    <button onclick="sendMessage()">Kirim</button>
  </div>
</div>

<script>
 // memori chatbot cuy
  // ========================================
  
  const donghuaDatabase = {
    // Donghua Action/Fantasy
    action: {
      titles: [
        {
          name: "Perfect World (Wanmei Shijie)",
          year: "2021-sekarang",
          rating: "8.9/10",
          genre: "Action, Fantasy, Adventure",
          description: "Shi Hao, seorang pemuda berbakat dari Desa Batu, berpetualang melawan makhluk purba dan memperjuangkan keabadian. Adaptasi novel populer oleh Chen Dong.",
          episodes: "200+ episode",
          status: "Ongoing"
        },
        {
          name: "A Will Eternal (Yong Sheng)",
          year: "2020-sekarang",
          rating: "8.7/10",
          genre: "Action, Fantasy, Comedy",
          description: "Bai Xiaochun, seorang alkimiawan pemula yang takut mati, terlibat dalam petualangan epik mengejar keabadian. Kombinasi action dan humor yang segar.",
          episodes: "100+ episode",
          status: "Ongoing"
        },
        {
          name: "Throne of Seal (Feng Yin Shen Zuo)",
          year: "2023-sekarang",
          rating: "8.8/10",
          genre: "Action, Fantasy, Romance",
          description: "Long Haochen, seorang kesatria suci muda, berjuang melawan iblis dan membangun kembali kekaisaran. Produksi studio Tencent dengan animasi berkualitas tinggi.",
          episodes: "Season 2 sedang tayang",
          status: "Ongoing"
        },
        {
          name: "Against the Sky Supreme (Ni Tian Zhizun)",
          year: "2023-sekarang",
          rating: "8.6/10",
          genre: "Action, Fantasy, Reincarnation",
          description: "Chen Xuan, mantan penguasa tertinggi, bereinkarnasi dan memulai perjalanan baru melawan takdir. CGI dan fight scene yang mengesankan.",
          episodes: "Season 1 selesai, Season 2 diumumkan",
          status: "Ongoing"
        },
        {
          name: "Swallowed Star (Tunshi Xingkong)",
          year: "2020-sekarang",
          rating: "8.9/10",
          genre: "Action, Sci-Fi, Apocalypse",
          description: "Dalam dunia pasca-apokaliptik, Luo Feng berjuang melawan monster mutan dan menjelajahi alam semesta. Adaptasi novel I Eat Tomatoes.",
          episodes: "100+ episode",
          status: "Ongoing"
        },
        {
          name: "The Ravages of Time (Huo Feng Liao Yuan)",
          year: "2023-sekarang",
          rating: "9.0/10",
          genre: "Action, Historical, Military",
          description: "Adaptasi manhua populer tentang Tiga Kerajaan dengan strategi militer kompleks dan pertempuran epik. Animasi style unik.",
          episodes: "Season 1 selesai",
          status: "Ongoing (Season 2 diumumkan)"
        },
        {
          name: "Jade Dynasty (Zhu Xian)",
          year: "2022-sekarang",
          rating: "8.7/10",
          genre: "Action, Fantasy, Xianxia",
          description: "Zhang Xiaofan bergabung dengan sekte kultivasi dan terlibat dalam konflik besar antara aliran baik dan jahat. Adaptasi novel klasik.",
          episodes: "Season 3 sedang tayang",
          status: "Ongoing"
        },
        {
          name: "Immortality (Yong Sheng)",
          year: "2023-sekarang",
          rating: "8.8/10",
          genre: "Action, Fantasy, Cultivation",
          description: "Bai Xiaochun dalam versi adaptasi yang lebih serius, mengejar jalur kultivasi dan menghadapi konspirasi besar.",
          episodes: "Season 1 selesai",
          status: "Ongoing"
        }
      ]
    },

    // Donghua Romance
    romance: {
      titles: [
        {
          name: "Heaven Official's Blessing (Tian Guan Ci Fu)",
          year: "2020-2024",
          rating: "9.3/10", 
          genre: "Romance, Fantasy, Historical, BL",
          description: "Tentang pangeran yang jatuh dari surga dan dewa misterius. Season 2 telah rilis dengan visual yang lebih memukau.",
          episodes: "2 season + special episodes",
          status: "Ongoing (Season 3 dikonfirmasi)"
        },
        {
          name: "My Wife is the Student Council President",
          year: "2019",
          rating: "7.5/10",
          genre: "Romance, School, Comedy",
          description: "Komedi romantis sekolah yang ringan dan menghibur.",
          episodes: "12 episode",
          status: "Completed"
        },
        {
          name: "Love Between Fairy and Devil (Cang Lan Jue)",
          year: "2022",
          rating: "8.9/10",
          genre: "Romance, Fantasy, Xianxia",
          description: "Donghua adaptasi dari drama populer tentang cinta antara peri dan iblis.",
          episodes: "36 episode",
          status: "Completed"
        },
        {
        name: "No Doubt In Us (Mojin: Xiu Yu Zhi Ge)",
        year: "2022-2023",
        rating: "8.8/10",
        genre: "Romance, Historical, Fantasy, Body Swap",
        description: "Kaisar dan permaisuri secara tak terduga bertukar tubuh dan harus belajar memahami kehidupan masing-masing. Adaptasi manhua populer.",
        episodes: "2 season, 24 episode",
        status: "Completed"
        },
        {
        name: "To Be Heroine (Xiong Bing Lian)",
        year: "2023-sekarang",
        rating: "8.7/10",
        genre: "Romance, Fantasy, Isekai, Reverse Harem",
        description: "Gadis modern terlempar ke dunia game dan bertemu dengan banyak pria tampan. Animasi warna-warni dan karakter menarik.",
        episodes: "Season 1 selesai",
        status: "Ongoing"
        },
        {
        name: "The Magic Chef of Ice and Fire (Bing Huo Mo Chu)",
        year: "2023-sekarang",
        rating: "8.5/10",
        genre: "Romance, Fantasy, Adventure, Cooking",
        description: "Koki dengan kekuatan elemen es dan api berpetualang sambil menemukan cinta sejati. Kombinasi unik romance dan action.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "Once Upon a Time in Lingjian Mountain (Ling Jian Shan)",
        year: "2023-sekarang",
        rating: "8.6/10",
        genre: "Romance, Fantasy, Comedy, Xianxia",
        description: "Komedi romance kultivasi dengan protagonis cerdas dan hubungan chemistry yang kuat antara lead couple.",
        episodes: "Season 2 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "The Legend of Sun Knight (Guangming Jue Dai Jia You Xi)",
        year: "2023",
        rating: "8.4/10",
        genre: "Romance, Fantasy, Comedy, Isekai",
        description: "Gamer perempuan terlempar ke dunia game dan terlibat romance dengan karakter knight. Style reverse isekai yang fresh.",
        episodes: "24 episode",
        status: "Completed"
        },
        {
        name: "Memory of Chang'an",
        year: "2024",
        rating: "8.9/10",
        genre: "Romance, Historical, Drama, Reincarnation",
        description: "Kisah cinta tragis dan indah di latar kekaisaran kuno. Animasi cinematic dengan emotional depth yang kuat.",
        episodes: "12 episode",
        status: "Completed"
        },
        {
        name: "Falling into Your Smile (Ni Wei Xiao Lai Hen Mei)",
        year: "2023",
        rating: "8.7/10",
        genre: "Romance, Gaming, Esports, Comedy",
        description: "Gadis menjadi player esports profesional dan berkembangnya romance dengan team captain. Adaptasi novel gaming populer.",
        episodes: "24 episode",
        status: "Completed"
        },
        {
        name: "Eternal Faith (Chen Qing Ling)",
        year: "2024-sekarang",
        rating: "9.1/10",
        genre: "Romance, Fantasy, BL, Xianxia",
        description: "Adaptasi donghua resmi dari The Untamed/Mo Dao Zu Shi dengan animasi yang ditingkatkan dan cerita yang lebih lengkap.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "The Princess and the Werewolf (Wangfei Yu Lang)",
        year: "2024-sekarang",
        rating: "8.6/10",
        genre: "Romance, Fantasy, Comedy, Supernatural",
        description: "Putri yang dinikahkan dengan pangeran werewolf dalam hubungan yang penuh komedi dan romance berkembang.",
        episodes: "Sedang tayang",
        status: "Ongoing"
        }

      ]
    },

    // Donghua fantasi
    fantasy: {
      titles: [
        {
        name: "Lord of the Mysteries (è¯¡ç§˜ä¹‹ä¸»)",
        year: "2025-sekarang",
        rating: "9.3/10 (IMDb), ~8.77/10 (MyAnimeList), ~4.8/5 (Crunchyroll)",
        genre: "Fantasy, Mystery, Supernatural, Isekai, Urban Fantasy",
        description: "Klein Moretti bangun di dunia ala Victoria penuh misteri supernatural & organisasi rahasia, menguak rahasia & kekuatan gaib.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing",
        },
        {
        name: "The Legend of the Dragon Soldier (Long Bing Chuan Qi)",
        year: "2024-sekarang",
        rating: "8.8/10",
        genre: "Fantasy, Adventure, Military, Kingdom Building",
        description: "Tentara modern terlempar ke dunia fantasi dan menggunakan pengetahuan militernya untuk membangun kerajaan dan teknologi maju.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "Throne of the Arcane (Mofa Diwei)",
        year: "2024-sekarang",
        rating: "8.9/10",
        genre: "Fantasy, Magic, Academy, Political",
        description: "Di dunia sihir yang kompleks, pemuda dari desa terpencil naik pangkat dalam hierarki magis penuh intrik politik.",
        episodes: "16 episode dirilis",
        status: "Ongoing"
        },
        {
        name: "Chronicles of the Eternal Moon (Yongheng Zhi Yue)",
        year: "2024",
        rating: "8.7/10",
        genre: "Fantasy, Mythology, Adventure, Epic",
        description: "Perjalanan epik melalui dunia yang terinspirasi mitologi Tiongkok kuno dengan dewa, monster, dan peradaban kuno.",
        episodes: "24 episode",
        status: "Completed (Season 2 diumumkan)"
        },
        {
        name: "The Celestial Swordsman (Xian Jian Qi Xia Zhuan)",
        year: "2023-sekarang",
        rating: "8.8/10",
        genre: "Fantasy, Xianxia, Adventure, Romance",
        description: "Adaptasi game klasik Chinese RPG tentang kelompok pahlawan dalam petualangan melawan kekuatan jahat kuno.",
        episodes: "2 season",
        status: "Ongoing"
        },
        {
        name: "Realm of Myths and Legends (Shenhua Lingyu)",
        year: "2024-sekarang",
        rating: "8.6/10",
        genre: "Fantasy, Isekai, VRMMO, Adventure",
        description: "Pemain terlempar ke game VRMMO yang menjadi dunia nyata, harus menyelesaikan quest epik berdasarkan mitologi.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "The Last Summoner (Zui Hou De Zhaohuanshi)",
        year: "2023-2024",
        rating: "8.5/10",
        genre: "Fantasy, Summoning, Magic, Battle",
        description: "Di dunia di mana summoner langka, pemuda dengan kemampuan summon legendaris bangkit melawan invasi monster.",
        episodes: "36 episode",
        status: "Completed"
        },
        {
        name: "Crimson Desert: Blood Wolves (Xue Shuang)",
        year: "2024",
        rating: "8.9/10",
        genre: "Fantasy, Military, Epic, Dark Fantasy",
        description: "Kisah epik tentang tentara bayaran di dunia fantasi yang terpecah oleh perang dan sihir gelap.",
        episodes: "12 episode",
        status: "Completed"
        },
        {
        name: "The Infinite World (Wuxian Shijie)",
        year: "2024-sekarang",
        rating: "8.7/10",
        genre: "Fantasy, Isekai, Multiple Worlds, Adventure",
        description: "Protagonis dapat bepergian antar dunia fantasi yang berbeda, masing-masing dengan sistem magic dan ras unik.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        },
        {
        name: "Dragon's Disciple: The Awakening (Long Zhi Chuanren)",
        year: "2023-sekarang",
        rating: "8.4/10",
        genre: "Fantasy, Dragons, Adventure, Coming of Age",
        description: "Pemuda biasa menemukan warisan naga kuno dan harus menguasai kekuatannya sambil menghindari pemburu naga.",
        episodes: "2 season",
        status: "Ongoing"
        },
        {
        name: "The Clockwork Kingdom (Fatiiao Wangguo)",
        year: "2024",
        rating: "8.8/10",
        genre: "Fantasy, Steampunk, Adventure, Mystery",
        description: "Di kerajaan dengan teknologi steam dan magic, insinyur muda memecahkan misteri mesin kuno yang dapat mengubah dunia.",
        episodes: "18 episode",
        status: "Completed"
        },
        {
        name: "Stellar Odyssey: Beyond the Stars (Xingji Lixian)",
        year: "2024-sekarang",
        rating: "9.0/10",
        genre: "Fantasy, Sci-Fi, Space Opera, Adventure",
        description: "Petualangan epik melalui galaksi dengan peradaban alien, teknologi kuno, dan misteri kosmik yang dalam.",
        episodes: "Season 1 sedang tayang",
        status: "Ongoing"
        }
      ]
    },

    // Donghua Terbaru 2023-2024
    recent: {
      titles: [
        {
          name: "Perfect World (Wanmei Shijie)",
          year: "2021-2023",
          rating: "8.7/10",
          genre: "Action, Fantasy, Adventure",
          description: "Mengikuti Shi Hao dari kecil hingga menjadi penguasa. Animasi berkualitas tinggi.",
          episodes: "3 season, 100+ episode",
          status: "Ongoing"
        },
        {
          name: "Swallowed Star (Tunshi Xingkong)",
          year: "2020-2023",
          rating: "8.5/10",
          genre: "Sci-fi, Action, Adventure",
          description: "Bumi diserang monster, manusia harus berevolusi untuk bertahan hidup.",
          episodes: "3 season",
          status: "Ongoing"
        },
        {
          name: "A Record of Mortal's Journey to Immortality",
          year: "2020-2023",
          rating: "8.6/10",
          genre: "Fantasy, Cultivation, Adventure",
          description: "Kultivator biasa yang perlahan naik level menuju keabadian.",
          episodes: "3 season",
          status: "Ongoing"
        }
      ]
    },

    // Donghua Comedy/Slice of Life
    comedy: {
      titles: [
        {
          name: "Daily Life of the Immortal King",
          year: "2020-2022",
          rating: "8.4/10",
          genre: "Comedy, School, Supernatural",
          description: "Komedi tentang siswa SMA yang adalah kultivator terkuat tapi ingin hidup normal.",
          episodes: "2 season",
          status: "Completed"
        },
        {
          name: "Please Take My Brother Away",
          year: "2018-2020",
          rating: "8.0/10",
          genre: "Comedy, Slice of Life, Family",
          description: "Komedi keluarga tentang kakak-adik yang selalu bertengkar tapi saling sayang.",
          episodes: "4 season",
          status: "Completed"
        }
      ]
    },

    // Keywords untuk pencarian
    keywords: {
      // --- ACTION / FANTASY ---
      "terbaik": "action",
      "populer": "action",
      "bagus": "action",
      "action": "action",
      "pertarungan": "action",
      "fighting": "action",
      "battle": "action",
      "petualangan": "action",
      "cultivation": "action",
      "martial": "action",
      "senjata": "action",
      "kungfu": "action",
      "xianxia": "action",
      "fantasy": "fantasy",
      "sihir": "fantasy",
      "magic": "fantasy",
      "isekai": "fantasy",
      "misteri": "fantasy",
      "mystery": "fantasy",
      "supernatural": "fantasy",

      // --- ROMANCE ---
      "romance": "romance",
      "romantis": "romance",
      "cinta": "romance",
      "romantic": "romance",
      "baper": "romance",
      "couple": "romance",
      "relationship": "romance",
      "drama": "romance",

      // --- RECENT / TERBARU ---
      "terbaru": "recent",
      "baru": "recent",
      "ongoing": "recent",
      "rilis": "recent",
      "rillis": "recent",
      "2023": "recent",
      "2024": "recent",
      "2025": "recent",
      "mau": "recent",
      "baru keluar": "recent",
      "up to date": "recent",
      "season baru": "recent",

      // --- COMEDY / SLICE OF LIFE ---
      "comedy": "comedy",
      "komedi": "comedy",
      "lucu": "comedy",
      "funny": "comedy",
      "slice of life": "comedy",
      "sehari hari": "comedy",
      "keluarga": "comedy",
      "school": "comedy",
      "sekolah": "comedy",
      "humor": "comedy",
      "santai": "comedy",

      // --- HORROR ---
      "horror": "horror",
      "horor": "horror",
      "menegangkan": "horror",
      "seram": "horror",
      "mistis": "horror",
      "dark": "horror",
      "thriller": "horror",

      // --- SCI-FI ---
      "sci-fi": "scifi",
      "sci fi": "scifi",
      "science fiction": "scifi",
      "luar angkasa": "scifi",
      "teknologi": "scifi",
      "robot": "scifi",
      "mecha": "scifi",
      "masa depan": "scifi",
    }
  };


  // Database tambahan untuk respons umum
  const generalResponses = {
 greeting: [
      "Halo! Aku siap membantu kamu cari donghua yang seru!",
      "Hi! Ada donghua yang mau kamu cari? Aku punya banyak rekomendasi nih!",
      "Halo! Mau nonton donghua apa hari ini? Cerita soal preferensi kamu dong!",
      "Hai! Selamat datang di dunia donghua! Genre apa yang kamu suka?",
      "Halo teman donghua! Ada yang bisa aku bantu cariin? Aku punya database lengkap!",
      "Hai! Siap-siap menjelajah dunia donghua yang menakjubkan! Butuh rekomendasi apa?"
    ],
    
    thanks: [
      "Sama-sama! Semoga nonton donghuanya seru ya!",
      "Senang bisa bantu! Jangan lupa share pendapat kamu setelah nonton!",
      "You're welcome! Kapan-kapan tanya lagi ya kalau butuh rekomendasi donghua lainnya!",
      "Sama-sama! Happy watching! Kalau ada yang kurang jelas, tanya lagi ya! ",
      "Dengan senang hati! Jangan lupa kasih rating ke donghua yang udah kamu tonton! ",
      "Sama-sama! Semoga donghua yang kamu tonton bikin hari-hari lebih berwarna! "
    ],

    unknown: [
      "Hmm, aku belum paham. Coba tanya tentang genre donghua seperti 'action', 'romance', atau 'comedy'?",
      "Maaf aku bingung ğŸ˜… Mungkin bisa tanya lebih spesifik? Misalnya 'donghua action terbaik' atau 'rekomendasi donghua 2023'?",
      "Aku belum mengerti pertanyaan kamu. Coba ketik 'rekomendasi donghua' atau sebutkan genre yang kamu suka!",
      "Waduh, pertanyaannya terlalu canggih nih! Coba tanya tentang:\nâ€¢ Genre donghua\nâ€¢ Tahun rilis\nâ€¢ Rating terbaik\nâ€¢ Status (ongoing/completed)",
      "Aku khusus jago bahas donghua nih! Coba tanya:\nâ€¢ 'Rekomendasi donghua fantasy'\nâ€¢ 'Donghua romance terbaru'\nâ€¢ 'Series action ongoing'",
      "Hmm, kayaknya aku butuh clue lebih jelas nih! ğŸ§ Coba sebutkan:\nâ€¢ Genre favorit kamu\nâ€¢ Mau yang ongoing atau completed?\nâ€¢ Prefer rating tinggi?"
    ],

    // RESPONS BARU YANG DITAMBAHKAN
    askingPreferences: [
      "Cerita dong genre apa yang paling kamu suka? Action, romance, fantasy, atau comedy? ğŸ­",
      "Kamu mood nonton donghua jenis apa hari ini? Aku bisa kasih rekomendasi yang pas!",
      "Beri tahu aku preferensi kamu dong! Genre favorit, tahun rilis, atau rating tertentu?",
      "Aku penasaran nih, biasanya kamu suka donghua dengan tema seperti apa? ğŸ¤”",
      "Yuk share taste donghua kamu! Biar aku bisa kasih rekomendasi yang cocok!",
      "Mau cari donghua berdasarkan genre, tahun, atau rating? Aku siap bantu!"
    ],

    recommendations: [
      "Nih aku punya beberapa rekomendasi mantap buat kamu! ğŸš€",
      "Berdasarkan preferensi kamu, ini dia donghua-donghua yang worth to watch! âœ¨",
      "Aha! Cocok nih dengan yang kamu cari. Cek rekomendasi dari aku! ğŸ“º",
      "Ini dia list donghua yang sesuai request kamu! Semoga suka ya! ğŸ¯",
      "Wah, selera kamu bagus nih! Ini rekomendasi donghua yang pasti kamu suka! ğŸ’«",
      "Aku udah siapin list terbaik buat kamu! Siap-siap binge watching! ğŸ¿"
    ],

    noResults: [
      "Wah, sepertinya belum ada donghua yang cocok dengan kriteria kamu nih ğŸ˜”",
      "Maaf, di database aku belum ada yang match dengan pencarian kamu",
      "Aku cari-cari dulu ya, kayaknya kriteria kamu cukup spesifik nih!",
      "Gak nemu-nemu nih... Coba cari dengan kriteria yang lebih umum dulu?",
      "Sepertinya belum ada donghua yang persis seperti yang kamu cari. Mau coba genre lain?",
      "Aduh, zonk nih! Mungkin bisa coba dengan keyword yang berbeda?"
    ],

    askingMore: [
      "Mau cari yang lain lagi? Atau butuh detail lebih tentang donghua tertentu? ğŸ”",
      "Ada genre atau tema lain yang ingin kamu explore? Aku siap bantu!",
      "Gimana? Udah dapet yang cocok atau mau cari lagi? ğŸ˜Š",
      "Butuh rekomendasi lainnya? Atau mau tahu donghua yang sedang trending?",
      "Mau lanjut exploring dunia donghua? Aku punya banyak lagi rekomendasi!",
      "Ada yang pengen ditanyain lagi? Aku masih semangat nih bantu kamu! ğŸ’ª"
    ],

    error: [
      "Aduh, ada gangguan nih! Coba lagi ya atau tanya sesuatu yang lain? ğŸ› ï¸",
      "Waduh, error dikit nih. Mungkin bisa ulangi pertanyaannya?",
      "Server lagi sedikit lemot nih... Coba tanya lagi dengan pertanyaan yang sama?",
      "Oops, ada yang tidak beres! Tapi jangan khawatir, coba lagi dalam beberapa saat ya!",
      "Koneksi lagi kurang stabil nih... Bisa ulangi pertanyaannya?",
      "Aku sedikit pusing nih ğŸ˜µ Coba tanya dengan cara yang berbeda ya!"
    ],

    farewell: [
      "Sampai jumpa lagi! Happy donghua watching! ğŸ²",
      "Dadah! Jangan lupa kasih tau aku kalau nemu donghua seru ya!",
      "Sampai ketemu lagi! Semoga harimu penuh dengan donghua yang awesome! âœ¨",
      "Bye bye! Kalau butuh rekomendasi lagi, aku siap membantu!",
      "Sampai jumpa! Jangan lupa share pengalaman nonton donghua kamu ya!",
      "Dadah! Tetap semangat mengeksplorasi dunia donghua yang luas ini! ğŸŒŸ"
    ],

    funFacts: [
      "Tahu gak? Donghua 'Battle Through The Heavens' udah punya 100+ episode lho! ğŸ‰",
      "Fun fact: Banyak donghua populer yang diadaptasi dari novel web China! ğŸ“š",
      "Hebatnya, industri donghua China berkembang sangat pesat dalam 5 tahun terakhir! ğŸš€",
      "Tahu gak? 'Soul Land' itu salah satu donghua dengan episode terbanyak!",
      "Fact: Kualitas animasi donghua sekarang sudah setara dengan anime Jepang! ğŸ’«",
      "Menariknya, banyak donghua yang punya sistem kultivasi yang detail banget! ğŸ§˜"
    ]
  };

  // ========================================
  // === FUNGSI CHATBOT ===
  // ========================================

  const chatMessages = document.getElementById("chatMessages");
  const userInput = document.getElementById("userInput");
  const typingIndicator = document.getElementById("typingIndicator");

  // Event listener untuk Enter key
  userInput.addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      sendMessage();
    }
  });

  function sendMessage() {
    let message = userInput.value.trim();
    if (message === "") return;

    appendMessage(message, "user");
    userInput.value = "";

    showTypingIndicator();
    
    setTimeout(() => {
      hideTypingIndicator();
      let botReply = getBotReply(message);
      appendMessage(botReply, "bot");
    }, 1000 + Math.random() * 1000); // Random delay 1-2 detik
  }

  function sendSuggestion(text) {
    userInput.value = text;
    sendMessage();
  }

  function appendMessage(text, sender) {
    let div = document.createElement("div");
    div.classList.add("message", sender);
    div.innerHTML = text; // Menggunakan innerHTML untuk mendukung HTML formatting
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function showTypingIndicator() {
    typingIndicator.style.display = "block";
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function hideTypingIndicator() {
    typingIndicator.style.display = "none";
  }

  function getBotReply(input) {
    input = input.toLowerCase().trim();
    
    // Cek greeting
    if (input.includes("halo") || input.includes("hi") || input.includes("hello")) {
      return getRandomResponse(generalResponses.greeting);
    }
    
    // Cek thanks
    if (input.includes("terima kasih") || input.includes("thanks") || input.includes("makasih")) {
      return getRandomResponse(generalResponses.thanks);
    }
    
    // Cari berdasarkan keyword
    for (let keyword in donghuaDatabase.keywords) {
      if (input.includes(keyword)) {
        let category = donghuaDatabase.keywords[keyword];
        return formatDonghuaList(donghuaDatabase[category], category);
      }
    }
    
    // Cek untuk kata "rekomendasi" umum
    if (input.includes("rekomendasi") || input.includes("recommend") || input.includes("suggest")) {
      return formatDonghuaList(donghuaDatabase.action, "action", "Ini beberapa donghua terbaik yang wajib kamu tonton:");
    }
    
    // Response default
    return getRandomResponse(generalResponses.unknown);
  }

  function formatDonghuaList(data, category, customIntro = null) {
  if (!data || !data.titles) return "Maaf, data tidak ditemukan ğŸ˜…";
  
  let intro = customIntro || getCategoryIntro(category);
  let result = intro + "<br><br>";

  // Acak urutan donghua
  let shuffled = data.titles.sort(() => 0.5 - Math.random());

  // Ambil 2 donghua secara acak
  let selectedTitles = shuffled.slice(0, 2);

  selectedTitles.forEach((donghua, index) => {
    result += `<span class="donghua-title">${index + 1}. ${donghua.name}</span><br>`;
    result += `ğŸ“… ${donghua.year} | <span class="rating">â­ ${donghua.rating}</span><br>`;
    result += `ğŸ­ ${donghua.genre}<br>`;
    result += `ğŸ“º ${donghua.episodes}<br>`;
    result += `${donghua.description}<br><br>`;
  });
  
  result += "Mau rekomendasi genre lain? Tanya aja! ğŸ˜Š";
  return result;
}


  function getCategoryIntro(category) {
    const intros = {
      action: "Ini donghua action/fantasy terbaik yang harus kamu tonton! ğŸ”¥",
      romance: "Donghua romance yang bikin baper nih! ğŸ’•",
      recent: "Donghua terbaru yang lagi hits! âœ¨",
      comedy: "Donghua comedy yang dijamin bikin ketawa! ğŸ˜‚"
    };
    return intros[category] || "Rekomendasi donghua pilihan:";
  }

  function getRandomResponse(responses) {
    return responses[Math.floor(Math.random() * responses.length)];
  }

  // Auto-focus input saat halaman dimuat
  window.addEventListener('load', function() {
    userInput.focus();
  });
</script>

</body>
</html>